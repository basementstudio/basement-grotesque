import Box from 'components/common/box'
import { DURATION, gsap } from 'lib/gsap'
import { useEffect, useRef } from 'react'
import { useInView } from 'react-intersection-observer'

export const Ab1 = () => {
  return (
    <div className="ab">
      <svg
        viewBox="0 0 840 522"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="ab"
      >
        <g clipPath="url(#ab-1-clip0)">
          <path
            d="M362.234 53.8971L363.187 53.5919L362.964 52.8971H362.234V53.8971ZM172.127 53.8971V52.8971H171.403L171.177 53.5842L172.127 53.8971ZM31.7314 480L30.7817 479.687L30.3491 481H31.7314V480ZM155.192 480V481H155.93L156.147 480.295L155.192 480ZM180.867 396.965V395.965H180.13L179.912 396.669L180.867 396.965ZM344.753 396.965L345.717 396.698L345.514 395.965H344.753V396.965ZM367.697 480L366.733 480.266L366.936 481H367.697V480ZM498.806 480V481H500.176L499.758 479.695L498.806 480ZM210.367 304.096L209.417 303.783L208.984 305.096H210.367V304.096ZM262.264 146.766V145.766H261.541L261.314 146.452L262.264 146.766ZM265.542 146.766L266.493 146.458L266.27 145.766H265.542V146.766ZM316.346 304.096V305.096H317.72L317.298 303.789L316.346 304.096ZM362.234 52.8971H172.127V54.8971H362.234V52.8971ZM171.177 53.5842L30.7817 479.687L32.6812 480.313L173.077 54.2101L171.177 53.5842ZM31.7314 481H155.192V479H31.7314V481ZM156.147 480.295L181.823 397.26L179.912 396.669L154.237 479.705L156.147 480.295ZM180.867 397.965H344.753V395.965H180.867V397.965ZM343.789 397.231L366.733 480.266L368.661 479.734L345.717 396.698L343.789 397.231ZM367.697 481H498.806V479H367.697V481ZM499.758 479.695L363.187 53.5919L361.282 54.2024L497.853 480.305L499.758 479.695ZM211.317 304.409L263.214 147.079L261.314 146.452L209.417 303.783L211.317 304.409ZM262.264 147.766H265.542V145.766H262.264V147.766ZM264.59 147.073L315.395 304.403L317.298 303.789L266.493 146.458L264.59 147.073ZM316.346 303.096H210.367V305.096H316.346V303.096ZM458.09 42.9714V41.9714H457.09V42.9714H458.09ZM458.09 480H457.09V481H458.09V480ZM559.153 480V481H560.153V480H559.153ZM559.153 411.714L560.138 411.538L558.153 411.714H559.153ZM561.885 196.478H560.885L562.832 196.798L561.885 196.478ZM561.885 42.9714H562.885V41.9714H561.885V42.9714ZM457.09 42.9714V480H459.09V42.9714H457.09ZM458.09 481H559.153V479H458.09V481ZM560.153 480V411.714H558.153V480H560.153ZM558.169 411.89C562.846 438.028 573.607 457.004 591.357 469.416C609.076 481.805 633.621 487.555 665.679 487.555V485.555C633.821 485.555 609.747 479.834 592.503 467.777C575.292 455.742 564.747 437.297 560.138 411.538L558.169 411.89ZM665.679 487.555C716.802 487.555 749.207 479.097 768.702 453.15C778.425 440.209 784.868 423.004 788.886 400.538C792.905 378.072 794.51 350.279 794.51 316.114H792.51C792.51 350.235 790.905 377.891 786.917 400.186C782.929 422.481 776.569 439.35 767.103 451.948C748.221 477.079 716.711 485.555 665.679 485.555V487.555ZM794.51 316.114C794.51 281.95 792.973 254.161 789.126 231.698C785.28 209.237 779.114 192.035 769.807 179.096C751.136 153.137 720.091 144.673 671.142 144.673V146.673C719.978 146.673 750.117 155.144 768.183 180.263C777.246 192.863 783.336 209.736 787.155 232.036C790.974 254.334 792.51 281.993 792.51 316.114H794.51ZM671.142 144.673C639.942 144.673 615.466 148.501 597.25 156.851C578.989 165.22 567.041 178.125 560.937 196.157L562.832 196.798C568.747 179.322 580.289 166.824 598.083 158.669C615.921 150.493 640.065 146.673 671.142 146.673V144.673ZM562.885 196.478V42.9714H560.885V196.478H562.885ZM561.885 41.9714H458.09V43.9714H561.885V41.9714ZM562.885 364.187V295.355H560.885V364.187H562.885ZM562.885 295.355C562.885 273.631 567.775 258.391 578.208 248.556C588.655 238.708 604.869 234.079 627.985 234.079V232.079C604.667 232.079 587.831 236.737 576.836 247.101C565.828 257.478 560.885 273.377 560.885 295.355H562.885ZM627.985 234.079C640.685 234.079 650.441 234.594 657.965 236.498C665.444 238.391 670.653 241.64 674.342 247.092C678.065 252.593 680.312 260.44 681.612 271.681C682.911 282.911 683.253 297.404 683.253 316.114H685.253C685.253 297.404 684.912 282.808 683.599 271.452C682.287 260.107 679.993 251.873 675.999 245.971C671.972 240.019 666.289 236.542 658.456 234.559C650.667 232.588 640.688 232.079 627.985 232.079V234.079ZM683.253 316.114C683.253 334.825 682.876 349.312 681.443 360.535C680.008 371.767 677.528 379.603 673.414 385.098C669.329 390.556 663.543 393.823 655.222 395.725C646.867 397.635 636.042 398.15 621.976 398.15V400.15C636.044 400.15 647.071 399.64 655.667 397.675C664.298 395.702 670.565 392.243 675.015 386.297C679.437 380.389 681.976 372.143 683.426 360.789C684.878 349.426 685.253 334.824 685.253 316.114H683.253ZM621.976 398.15C603.188 398.15 588.368 395.557 578.277 390.011C573.247 387.246 569.411 383.757 566.828 379.502C564.247 375.25 562.885 370.176 562.885 364.187H560.885C560.885 370.49 562.322 375.933 565.118 380.54C567.913 385.145 572.033 388.861 577.314 391.763C587.845 397.552 603.07 400.15 621.976 400.15V398.15Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="ab-1-clip0">
            <rect width="840" height="522" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
  )
}

export const Ab2 = () => {
  return (
    <div className="absolute ab" data-scroll-speed={-0.2} data-scroll>
      <svg viewBox="0 0 840 522" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#ab-2-clip0)">
          <path
            d="M362.234 53.8971L363.187 53.5919L362.964 52.8971H362.234V53.8971ZM172.127 53.8971V52.8971H171.403L171.177 53.5842L172.127 53.8971ZM31.7314 480L30.7817 479.687L30.3491 481H31.7314V480ZM155.192 480V481H155.93L156.147 480.295L155.192 480ZM180.867 396.965V395.965H180.13L179.912 396.669L180.867 396.965ZM344.753 396.965L345.717 396.698L345.514 395.965H344.753V396.965ZM367.697 480L366.733 480.266L366.936 481H367.697V480ZM498.806 480V481H500.176L499.758 479.695L498.806 480ZM210.367 304.096L209.417 303.783L208.984 305.096H210.367V304.096ZM262.264 146.766V145.766H261.541L261.314 146.452L262.264 146.766ZM265.542 146.766L266.493 146.458L266.27 145.766H265.542V146.766ZM316.346 304.096V305.096H317.72L317.298 303.789L316.346 304.096ZM362.234 52.8971H172.127V54.8971H362.234V52.8971ZM171.177 53.5842L30.7817 479.687L32.6812 480.313L173.077 54.2101L171.177 53.5842ZM31.7314 481H155.192V479H31.7314V481ZM156.147 480.295L181.823 397.26L179.912 396.669L154.237 479.705L156.147 480.295ZM180.867 397.965H344.753V395.965H180.867V397.965ZM343.789 397.231L366.733 480.266L368.661 479.734L345.717 396.698L343.789 397.231ZM367.697 481H498.806V479H367.697V481ZM499.758 479.695L363.187 53.5919L361.282 54.2024L497.853 480.305L499.758 479.695ZM211.317 304.409L263.214 147.079L261.314 146.452L209.417 303.783L211.317 304.409ZM262.264 147.766H265.542V145.766H262.264V147.766ZM264.59 147.073L315.395 304.403L317.298 303.789L266.493 146.458L264.59 147.073ZM316.346 303.096H210.367V305.096H316.346V303.096ZM458.09 42.9714V41.9714H457.09V42.9714H458.09ZM458.09 480H457.09V481H458.09V480ZM559.153 480V481H560.153V480H559.153ZM559.153 411.714L560.138 411.538L558.153 411.714H559.153ZM561.885 196.478H560.885L562.832 196.798L561.885 196.478ZM561.885 42.9714H562.885V41.9714H561.885V42.9714ZM457.09 42.9714V480H459.09V42.9714H457.09ZM458.09 481H559.153V479H458.09V481ZM560.153 480V411.714H558.153V480H560.153ZM558.169 411.89C562.846 438.028 573.607 457.004 591.357 469.416C609.076 481.805 633.621 487.555 665.679 487.555V485.555C633.821 485.555 609.747 479.834 592.503 467.777C575.292 455.742 564.747 437.297 560.138 411.538L558.169 411.89ZM665.679 487.555C716.802 487.555 749.207 479.097 768.702 453.15C778.425 440.209 784.868 423.004 788.886 400.538C792.905 378.072 794.51 350.279 794.51 316.114H792.51C792.51 350.235 790.905 377.891 786.917 400.186C782.929 422.481 776.569 439.35 767.103 451.948C748.221 477.079 716.711 485.555 665.679 485.555V487.555ZM794.51 316.114C794.51 281.95 792.973 254.161 789.126 231.698C785.28 209.237 779.114 192.035 769.807 179.096C751.136 153.137 720.091 144.673 671.142 144.673V146.673C719.978 146.673 750.117 155.144 768.183 180.263C777.246 192.863 783.336 209.736 787.155 232.036C790.974 254.334 792.51 281.993 792.51 316.114H794.51ZM671.142 144.673C639.942 144.673 615.466 148.501 597.25 156.851C578.989 165.22 567.041 178.125 560.937 196.157L562.832 196.798C568.747 179.322 580.289 166.824 598.083 158.669C615.921 150.493 640.065 146.673 671.142 146.673V144.673ZM562.885 196.478V42.9714H560.885V196.478H562.885ZM561.885 41.9714H458.09V43.9714H561.885V41.9714ZM562.885 364.187V295.355H560.885V364.187H562.885ZM562.885 295.355C562.885 273.631 567.775 258.391 578.208 248.556C588.655 238.708 604.869 234.079 627.985 234.079V232.079C604.667 232.079 587.831 236.737 576.836 247.101C565.828 257.478 560.885 273.377 560.885 295.355H562.885ZM627.985 234.079C640.685 234.079 650.441 234.594 657.965 236.498C665.444 238.391 670.653 241.64 674.342 247.092C678.065 252.593 680.312 260.44 681.612 271.681C682.911 282.911 683.253 297.404 683.253 316.114H685.253C685.253 297.404 684.912 282.808 683.599 271.452C682.287 260.107 679.993 251.873 675.999 245.971C671.972 240.019 666.289 236.542 658.456 234.559C650.667 232.588 640.688 232.079 627.985 232.079V234.079ZM683.253 316.114C683.253 334.825 682.876 349.312 681.443 360.535C680.008 371.767 677.528 379.603 673.414 385.098C669.329 390.556 663.543 393.823 655.222 395.725C646.867 397.635 636.042 398.15 621.976 398.15V400.15C636.044 400.15 647.071 399.64 655.667 397.675C664.298 395.702 670.565 392.243 675.015 386.297C679.437 380.389 681.976 372.143 683.426 360.789C684.878 349.426 685.253 334.824 685.253 316.114H683.253ZM621.976 398.15C603.188 398.15 588.368 395.557 578.277 390.011C573.247 387.246 569.411 383.757 566.828 379.502C564.247 375.25 562.885 370.176 562.885 364.187H560.885C560.885 370.49 562.322 375.933 565.118 380.54C567.913 385.145 572.033 388.861 577.314 391.763C587.845 397.552 603.07 400.15 621.976 400.15V398.15Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="ab-2-clip0">
            <rect width="840" height="522" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
  )
}

export const Ab3 = () => {
  return (
    <div className="absolute ab" data-scroll-speed={-0.6} data-scroll>
      <svg viewBox="0 0 840 522" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#ab-3-clip0)">
          <path
            d="M362.234 53.8971L363.187 53.5919L362.964 52.8971H362.234V53.8971ZM172.127 53.8971V52.8971H171.403L171.177 53.5842L172.127 53.8971ZM31.7314 480L30.7817 479.687L30.3491 481H31.7314V480ZM155.192 480V481H155.93L156.147 480.295L155.192 480ZM180.867 396.965V395.965H180.13L179.912 396.669L180.867 396.965ZM344.753 396.965L345.717 396.698L345.514 395.965H344.753V396.965ZM367.697 480L366.733 480.266L366.936 481H367.697V480ZM498.806 480V481H500.176L499.758 479.695L498.806 480ZM210.367 304.096L209.417 303.783L208.984 305.096H210.367V304.096ZM262.264 146.766V145.766H261.541L261.314 146.452L262.264 146.766ZM265.542 146.766L266.493 146.458L266.27 145.766H265.542V146.766ZM316.346 304.096V305.096H317.72L317.298 303.789L316.346 304.096ZM362.234 52.8971H172.127V54.8971H362.234V52.8971ZM171.177 53.5842L30.7817 479.687L32.6812 480.313L173.077 54.2101L171.177 53.5842ZM31.7314 481H155.192V479H31.7314V481ZM156.147 480.295L181.823 397.26L179.912 396.669L154.237 479.705L156.147 480.295ZM180.867 397.965H344.753V395.965H180.867V397.965ZM343.789 397.231L366.733 480.266L368.661 479.734L345.717 396.698L343.789 397.231ZM367.697 481H498.806V479H367.697V481ZM499.758 479.695L363.187 53.5919L361.282 54.2024L497.853 480.305L499.758 479.695ZM211.317 304.409L263.214 147.079L261.314 146.452L209.417 303.783L211.317 304.409ZM262.264 147.766H265.542V145.766H262.264V147.766ZM264.59 147.073L315.395 304.403L317.298 303.789L266.493 146.458L264.59 147.073ZM316.346 303.096H210.367V305.096H316.346V303.096ZM458.09 42.9714V41.9714H457.09V42.9714H458.09ZM458.09 480H457.09V481H458.09V480ZM559.153 480V481H560.153V480H559.153ZM559.153 411.714L560.138 411.538L558.153 411.714H559.153ZM561.885 196.478H560.885L562.832 196.798L561.885 196.478ZM561.885 42.9714H562.885V41.9714H561.885V42.9714ZM457.09 42.9714V480H459.09V42.9714H457.09ZM458.09 481H559.153V479H458.09V481ZM560.153 480V411.714H558.153V480H560.153ZM558.169 411.89C562.846 438.028 573.607 457.004 591.357 469.416C609.076 481.805 633.621 487.555 665.679 487.555V485.555C633.821 485.555 609.747 479.834 592.503 467.777C575.292 455.742 564.747 437.297 560.138 411.538L558.169 411.89ZM665.679 487.555C716.802 487.555 749.207 479.097 768.702 453.15C778.425 440.209 784.868 423.004 788.886 400.538C792.905 378.072 794.51 350.279 794.51 316.114H792.51C792.51 350.235 790.905 377.891 786.917 400.186C782.929 422.481 776.569 439.35 767.103 451.948C748.221 477.079 716.711 485.555 665.679 485.555V487.555ZM794.51 316.114C794.51 281.95 792.973 254.161 789.126 231.698C785.28 209.237 779.114 192.035 769.807 179.096C751.136 153.137 720.091 144.673 671.142 144.673V146.673C719.978 146.673 750.117 155.144 768.183 180.263C777.246 192.863 783.336 209.736 787.155 232.036C790.974 254.334 792.51 281.993 792.51 316.114H794.51ZM671.142 144.673C639.942 144.673 615.466 148.501 597.25 156.851C578.989 165.22 567.041 178.125 560.937 196.157L562.832 196.798C568.747 179.322 580.289 166.824 598.083 158.669C615.921 150.493 640.065 146.673 671.142 146.673V144.673ZM562.885 196.478V42.9714H560.885V196.478H562.885ZM561.885 41.9714H458.09V43.9714H561.885V41.9714ZM562.885 364.187V295.355H560.885V364.187H562.885ZM562.885 295.355C562.885 273.631 567.775 258.391 578.208 248.556C588.655 238.708 604.869 234.079 627.985 234.079V232.079C604.667 232.079 587.831 236.737 576.836 247.101C565.828 257.478 560.885 273.377 560.885 295.355H562.885ZM627.985 234.079C640.685 234.079 650.441 234.594 657.965 236.498C665.444 238.391 670.653 241.64 674.342 247.092C678.065 252.593 680.312 260.44 681.612 271.681C682.911 282.911 683.253 297.404 683.253 316.114H685.253C685.253 297.404 684.912 282.808 683.599 271.452C682.287 260.107 679.993 251.873 675.999 245.971C671.972 240.019 666.289 236.542 658.456 234.559C650.667 232.588 640.688 232.079 627.985 232.079V234.079ZM683.253 316.114C683.253 334.825 682.876 349.312 681.443 360.535C680.008 371.767 677.528 379.603 673.414 385.098C669.329 390.556 663.543 393.823 655.222 395.725C646.867 397.635 636.042 398.15 621.976 398.15V400.15C636.044 400.15 647.071 399.64 655.667 397.675C664.298 395.702 670.565 392.243 675.015 386.297C679.437 380.389 681.976 372.143 683.426 360.789C684.878 349.426 685.253 334.824 685.253 316.114H683.253ZM621.976 398.15C603.188 398.15 588.368 395.557 578.277 390.011C573.247 387.246 569.411 383.757 566.828 379.502C564.247 375.25 562.885 370.176 562.885 364.187H560.885C560.885 370.49 562.322 375.933 565.118 380.54C567.913 385.145 572.033 388.861 577.314 391.763C587.845 397.552 603.07 400.15 621.976 400.15V398.15Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="ab-3-clip0">
            <rect width="840" height="522" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
  )
}

export const Ab4 = () => {
  return (
    <div className="absolute ab" data-scroll-speed={-1} data-scroll>
      <svg viewBox="0 0 840 522" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#ab-4-clip0)">
          <path
            d="M362.234 53.8971H172.127L31.7314 480H155.192L180.867 396.965H344.753L367.697 480H498.806L362.234 53.8971ZM210.367 304.096L262.264 146.766H265.542L316.346 304.096H210.367ZM458.09 42.9714V480H559.153V411.714C568.44 463.611 601.764 486.555 665.679 486.555C767.834 486.555 793.51 452.686 793.51 316.114C793.51 179.543 768.927 145.673 671.142 145.673C608.865 145.673 573.903 160.969 561.885 196.478V42.9714H458.09ZM561.885 364.187V295.355C561.885 251.653 581.551 233.079 627.985 233.079C678.79 233.079 684.253 241.273 684.253 316.114C684.253 390.955 678.243 399.15 621.976 399.15C584.282 399.15 561.885 388.77 561.885 364.187Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="ab-4-clip0">
            <rect width="840" height="522" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
  )
}

const AbAnimation = () => {
  const { ref, inView } = useInView({ threshold: 0.5 })
  const tlRef = useRef<gsap.core.Timeline>()

  useEffect(() => {
    if (!inView) return

    function handleResize() {
      const multiplier = Math.min((window.innerWidth * 20) / 1440, 20)
      const tl = gsap.timeline()
      tl.to('.ab svg', {
        y: (index) => index * multiplier,
        x: (index) => index * multiplier,
        ease: 'elastic.out(1, 0.4)',
        duration: DURATION * 3
      })
      tlRef.current = tl
    }

    handleResize()
    window.addEventListener('resize', handleResize)
    return () => {
      window.removeEventListener('resize', handleResize)
    }
  }, [inView])

  useEffect(() => {
    return () => {
      // eslint-disable-next-line react-hooks/exhaustive-deps
      tlRef.current?.kill()
    }
  }, [])

  return (
    <Box
      css={{
        position: 'relative',
        width: '100%',
        marginTop: '-64px',
        '.absolute': { position: 'absolute', inset: 0 }
      }}
      ref={ref}
    >
      <Ab1 />
      <Ab2 />
      <Ab3 />
      <Ab4 />
    </Box>
  )
}

export default AbAnimation
